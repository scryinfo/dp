!function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],p=0,f=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(u&&u(e);f.length;)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={0:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push(["Vtdi",1]),a()}({"+njc":function(t,e,a){"use strict";var n=a("ngoe");a.n(n).a},"/Iye":function(t,e,a){"use strict";var n=a("I0nL");a.n(n).a},0:function(t,e){},1:function(t,e){},2:function(t,e){},3:function(t,e){},"3VAn":function(t,e,a){"use strict";var n=a("zCoa");a.n(n).a},4:function(t,e){},"40Fw":function(t,e,a){"use strict";var n=a("XHZR");a.n(n).a},"4sA5":function(t,e,a){},5:function(t,e){},"5fT0":function(t,e,a){},6:function(t,e){},7:function(t,e){},8:function(t,e){},"A0++":function(t,e,a){"use strict";var n=a("Sr6S");a.n(n).a},CsaN:function(t,e,a){},DhUE:function(t,e,a){},I0nL:function(t,e,a){},KjXA:function(t,e,a){"use strict";var n=a("4sA5");a.n(n).a},LvXw:function(t,e,a){},QICH:function(t,e,a){},Scgh:function(t,e,a){"use strict";var n=a("vH4T");a.n(n).a},Sr6S:function(t,e,a){},TJwQ:function(t,e,a){"use strict";var n=a("5fT0");a.n(n).a},Vtdi:function(t,e,a){"use strict";a.r(e);var n=a("oCYn"),o=a("L2JU");n.default.use(o.a);var s=new o.a.Store({state:{accounts:[],datalist:[],transactionsell:[],transactionbuy:[],transactionverifier:[],transactionarbitrator:[],account:"",nickname:"用户昵称加载中...",balance:[{Balance:"-",Time:"-"},{Balance:"-",Time:"-"}]}}),i=a("jE9Z"),r={name:"404.vue",data:function(){return{count:5}},created:function(){var t=this,e=window.setInterval((function(){t.count--,t.count<0&&(window.clearInterval(e),t.count=5,t.$router.push({path:"/"}))}),1e3)}},l=(a("vPc9"),a("KHd+")),c=Object(l.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"page-container"},[e("span",{staticClass:"page-text"},[this._v("404 :   WEBPAGE NOT FOUND."),e("br"),e("br"),this._v("\n        Redirect to login page after "+this._s(this.count)+" seconds.")])])}),[],!1,null,"72acf4a6",null).exports,u=a("dpme"),p={name:"login.vue",data:function(){return{account:"",password:"",isReload:!1,showControl1:!1,showControl2:!1,buttonControl:!0,describe:""}},methods:{right:function(t){switch(this.showControl1=!0,this.showControl2=!1,t){case"登录":this.buttonControl=!0;break;case"新建":this.buttonControl=!1}this.describe=t+":"},hide:function(){this.showControl1=!1,this.showControl2=!1,this.password=""},submit_login:function(){var t=this.account;this.account="";var e=this.password;this.password="",u.a.send({Name:"loginVerify",Payload:{address:t,password:e}},(function(e,a){a.$router.push({name:"home",params:{acc:t}})}),(function(t,e){console.log("登录验证失败：",t),e.$alert(t,"用户名或密码错误！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},submit_new:function(){var t=this.password;this.password="";var e=this;u.a.send({Name:"createNewAccount",Payload:{password:t}},(function(t,a){e.account=t,e.showControl1=!1,e.showControl2=!0}),(function(t,e){console.log("创建新账户失败：",t),e.$alert(t,"创建新账户失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},submit_keystore:function(){this.password="",this.$router.push({name:"home",params:{acc:this.account}})}},created:function(){if(window.sessionStorage.clear(),""!==this.$store.state.account)return window.location.reload();this.isReload=!0}},f=(a("TJwQ"),Object(l.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isReload?a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"top"},[t._v("Dapp")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"left"},[a("div",{staticClass:"left-explain"},[t._v("选择账户：")]),t._v(" "),a("el-select",{staticClass:"left-account",attrs:{placeholder:"账户",clearable:"","allow-create":"",filterable:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},t._l(this.$store.state.accounts,(function(t){return a("el-option",{key:t.address,attrs:{value:t.address,label:t.address}})})),1),t._v(" "),a("div",{staticClass:"left-button-margin"},[a("el-button",{staticClass:"left-button",on:{click:function(e){return t.right("登录")}}},[t._v("登录")]),t._v(" "),a("el-button",{staticClass:"left-button",on:{click:function(e){return t.right("新建")}}},[t._v("创建新用户")])],1)],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[t.showControl1?a("div",{staticClass:"right",attrs:{id:"show"}},[a("div",{staticClass:"right-show"},[t._v(t._s(t.describe)+"\n                    "),a("el-input",{staticClass:"right-pwd",attrs:{placeholder:"密码",clearable:"","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("el-button",{staticClass:"right-button",on:{click:t.hide}},[t._v("返回")]),t._v(" "),t.buttonControl?a("el-button",{staticClass:"right-button",on:{click:t.submit_login}},[t._v("确认")]):t._e(),t._v(" "),t.buttonControl?t._e():a("el-button",{staticClass:"right-button",on:{click:t.submit_new}},[t._v("确认")])],1):t._e(),t._v(" "),t.showControl2?a("div",{staticClass:"right",attrs:{id:"show_new"}},[t._v("\n                你的新账户已创建完成： "),a("br"),t._v("\n                "+t._s(t.account)),a("br"),t._v("\n                如果需要在其他设备使用，请注意保存。"),a("br"),a("br"),a("hr"),a("br"),t._v("\n                确定使用该账户登录吗？\n                "),a("div",{staticClass:"right-pwd"},[a("el-button",{staticClass:"right-button",on:{click:t.hide}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"right-button",on:{click:t.submit_keystore}},[t._v("确认")])],1)]):t._e()])],1)],1):t._e()}),[],!1,null,"33d3a4c9",null).exports),d={stateEnum:["Begin","Created","Voted","Buying","ReadyForDownload","Closed"],state:[[!1,!1,!1,!0,!1,!1],[!1,!0,!0,!0,!1,!1],[!1,!0,!0,!1,!1,!1],[!1,!1,!1,!1,!0,!1],[!1,!1,!0,!0,!0,!0]],init:function(){u.a.addCallbackFunc("onPublish",h.onPublish),u.a.addCallbackFunc("onVerifiersChosen",h.onVerifiersChosen),u.a.addCallbackFunc("onAdvancePurchase",h.onAdvancePurchase),u.a.addCallbackFunc("onConfirmPurchase",h.onConfirmPurchase),u.a.addCallbackFunc("onReEncrypt",h.onReEncrypt),u.a.addCallbackFunc("onTransactionClose",h.onTransactionClose),u.a.addCallbackFunc("onRegisterVerifier",h.onRegisterVerifier),u.a.addCallbackFunc("onVoteResult",h.onVoteResult),u.a.addCallbackFunc("onVerifierDisable",h.onVerifierDisable),u.a.addCallbackFunc("onArbitrationBegin",h.onArbitrationBegin),u.a.addCallbackFunc("onArbitrationResult",h.onArbitrationResult)},reacquireData:function(t){switch(t){case"dl":m.initDL();break;case"txs":m.initTxS();break;case"txb":m.initTxB();break;case"txv":m.initTxV();break;case"txa":m.initTxA();break;case"all":m.initAll();break;case"evtdl":m.initEvtDL();break;default:console.log("Invalid mode! (in data init)")}},setStateString:function(t){for(var e,a=0;a<d.stateEnum.length;a++)if(t===d.stateEnum[a]){e=a;break}return e},functionDisabled:function(t,e){return!d.state[t][d.setStateString(e)]},setSupportVerify:function(t){return t?"支持验证":"不支持验证"},setNeedVerify:function(t){return t?"已启用验证":"未启用验证"}},h={onPublish:function(t,e){console.log("发布事件回调：",t),e.$notify({title:"发布事件回调：",message:"数据ID："+t.PublishId,position:"top-left"}),e.$store.state.datalist.push({Title:t.Title,Price:t.Price,Keys:t.Keys,Description:t.Description,Seller:t.Seller,SupportVerify:t.SupportVerify,SVDisplay:d.setSupportVerify(t.SupportVerify),PublishId:t.PublishId})},onVerifiersChosen:function(t,e){console.log("选择验证者事件回调：",t),e.$notify({title:"选择验证者事件回调：",message:"你已被选中成为 ID: "+t.TransactionId+" 交易 的验证者。",position:"top-left"}),e.$store.state.transactionverifier.push({PublishId:t.PublishId,TransactionId:t.TransactionId,Title:t.Title,Price:t.Price,Keys:t.Keys,Description:t.Description})},onAdvancePurchase:function(t,e){console.log("创建交易事件回调：",t),e.$notify({title:"创建交易事件回调：",message:"创建交易(ID："+t.TransactionId+")成功",position:"top-left"});var a={PublishId:t.PublishId,TransactionId:t.TransactionId,Title:t.Title,Price:t.Price,Keys:t.Keys,Description:t.Description,State:d.stateEnum[parseInt(t.State)],SVDisplay:d.setSupportVerify(t.SupportVerify),NVDisplay:d.setNeedVerify(t.StartVerify),ArbitrateResult:t.ArbitrateResult};switch(parseInt(t.Identify)){case 1:e.$store.state.transactionsell.push(a);break;case 2:a.SupportVerify=t.SupportVerify,a.Verifier1Response=t.Verifier1Response,a.Verifier2Response=t.Verifier2Response,e.$store.state.transactionbuy.push(a);break;default:console.log("Invalid identify! (on advance purchase)")}},onConfirmPurchase:function(t,e){switch(console.log("购买数据事件回调：",t),e.$notify({title:"购买数据事件回调：",message:"交易(ID: "+t.TransactionId+")已确认购买。",position:"top-left"}),parseInt(t.Identify)){case 1:e.$store.state.transactionsell.forEach((function(e){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}));break;case 2:e.$store.state.transactionbuy.forEach((function(e){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}));break;case 3:e.$store.state.transactionverifier.forEach((function(e,a,n){e.TransactionId===t.TransactionId&&(n[a]=n[0],n.shift())}))}},onReEncrypt:function(t,e){switch(console.log("再加密数据事件回调：",t),e.$notify({title:"再加密数据事件回调：",message:"交易(ID: "+t.TransactionId+")已重新加密。",position:"top-left"}),parseInt(t.Identify)){case 1:e.$store.state.transactionsell.forEach((function(e){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}));break;case 2:e.$store.state.transactionbuy.forEach((function(e){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}))}},onTransactionClose:function(t,e){switch(console.log("交易关闭事件回调：",t),e.$notify({title:"交易关闭事件回调：",message:"交易(ID: "+t.TransactionId+")已关闭。",position:"top-left"}),parseInt(t.Identify)){case 1:e.$store.state.transactionsell.forEach((function(e,a,n){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}));break;case 2:e.$store.state.transactionbuy.forEach((function(e,a,n){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}));break;case 3:e.$store.state.transactionverifier.forEach((function(e,a,n){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)])}))}},onRegisterVerifier:function(t,e){console.log("注册成为验证者事件回调。"),e.$notify({title:"注册成为验证者事件回调：",message:"你已成功注册成为验证者！ :)",position:"top-left"})},onVoteResult:function(t,e){console.log("验证者验证事件回调：",t),e.$notify({title:"验证者验证事件回调：",message:"收到新的验证者回复，交易ID："+t.TransactionId,position:"top-left"}),2===parseInt(t.Identify)&&e.$store.state.transactionbuy.forEach((function(e){e.TransactionId===t.TransactionId&&(e.State=d.stateEnum[parseInt(t.State)],""!==t.Verifier1Response&&(e.Verifier1Response=t.Verifier1Response),""!==t.Verifier2Response&&(e.Verifier2Response=t.Verifier2Response))}))},onVerifierDisable:function(t,e){console.log("取消验证者验证资格事件回调：",t),e.$notify({title:"取消验证者验证资格事件回调：",message:"验证者： "+t.Address+"被取消验证资格。",position:"top-left"})},onArbitrationBegin:function(t,e){console.log("仲裁开始事件回调：",t),e.$notify({title:"仲裁开始事件回调：",message:"你已被选中成为 ID: "+t.TransactionId+" 交易 的仲裁者。",position:"top-left"}),e.$store.state.transactionarbitrator.push({PublishId:t.PublishId,TransactionId:t.TransactionId,Title:t.Title,Price:t.Price,Keys:t.Keys,Description:t.Description})},onArbitrationResult:function(t,e){switch(console.log("仲裁结果事件回调：",t),e.$notify({title:"仲裁结果事件回调：",message:"交易(ID: "+t.TransactionId+")已完成仲裁，仲裁结果为："+t.ArbitrateResult+" 。",position:"top-left"}),parseInt(t.Identify)){case 1:e.$store.state.transactionsell.forEach((function(e){e.TransactionId===t.TransactionId&&(e.ArbitrateResult=t.ArbitrateResult)}));break;case 2:e.$store.state.transactionbuy.forEach((function(e){e.TransactionId===t.TransactionId&&(e.ArbitrateResult=t.ArbitrateResult)}))}}},m={initDL:function(){u.a.send({Name:"getDataList",Payload:""},(function(t,e){e.$store.state.datalist=[];for(var a=0;a<t.length;a++)e.$store.state.datalist.push({Title:t[a].Title,Price:t[a].Price,Keys:t[a].Keys,Description:t[a].Description,Seller:t[a].Seller,SupportVerify:t[a].SupportVerify,PublishId:t[a].PublishId,SVDisplay:d.setSupportVerify(t[a].SupportVerify)})}),(function(t,e){console.log("获取数据列表失败：",t),e.$alert(t,"获取数据列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initTxS:function(){u.a.send({Name:"getTxSell",Payload:""},(function(t,e){e.$store.state.transactionsell=[];for(var a=0;a<t.length;a++)e.$store.state.transactionsell.push({PublishId:t[a].PublishId,TransactionId:t[a].TransactionId,State:d.stateEnum[parseInt(t[a].State)],Title:t[a].Title,Price:t[a].Price,Keys:t[a].Keys,Description:t[a].Description,ArbitrateResult:!1,SVDisplay:d.setSupportVerify(t[a].SupportVerify),NVDisplay:d.setNeedVerify(t[a].StartVerify)})}),(function(t,e){console.log("获取当前用户为卖方的交易列表失败：",t),e.$alert(t,"获取当前用户为卖方的交易列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initTxB:function(){u.a.send({Name:"getTxBuy",Payload:""},(function(t,e){e.$store.state.transactionbuy=[];for(var a=0;a<t.length;a++)e.$store.state.transactionbuy.push({PublishId:t[a].PublishId,TransactionId:t[a].TransactionId,State:d.stateEnum[parseInt(t[a].State)],Title:t[a].Title,Price:t[a].Price,Keys:t[a].Keys,Description:t[a].Description,Verifier1Response:t[a].Verifier1Response,Verifier2Response:t[a].Verifier2Response,SupportVerify:t[a].SupportVerify,ArbitrateResult:t[a].Description,SVDisplay:d.setSupportVerify(t[a].SupportVerify),NVDisplay:d.setNeedVerify(t[a].StartVerify)})}),(function(t,e){console.log("获取当前用户为买方的交易列表失败：",t),e.$alert(t,"获取当前用户为买方的交易列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initTxV:function(){u.a.send({Name:"getTxVerify",Payload:""},(function(t,e){if(e.$store.state.transactionverifier=[],t.length>0)for(var a=0;a<t.length;a++)e.$store.state.transactionverifier.push({PublishId:t[a].PublishId,TransactionId:t[a].TransactionId,Title:t[a].Title,Price:t[a].Price,Keys:t[a].Keys,Description:t[a].Description})}),(function(t,e){console.log("获取当前用户为验证者的交易列表失败：",t),e.$alert(t,"获取当前用户为验证者的交易列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initTxA:function(){u.a.send({Name:"getTxArbitrate",Payload:""},(function(t,e){if(e.$store.state.transactionarbitrator=[],t.length>0)for(var a=0;a<t.length;a++)e.$store.state.transactionarbitrator.push({PublishId:t[a].PublishId,TransactionId:t[a].TransactionId,Title:t[a].Title,Price:t[a].Price,Keys:t[a].Keys,Description:t[a].Description})}),(function(t,e){console.log("获取当前用户为仲裁者的交易列表失败：",t),e.$alert(t,"获取当前用户为仲裁者的交易列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initEvtDL:function(){u.a.send({Name:"getEvtList",Payload:{eventBody:""}},(function(t,e){e.$store.state.datalist=[],console.log("getEvtList:",t)}),(function(t,e){console.log("获取数据列表失败：",t),e.$alert(t,"获取数据列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},initAll:function(){m.initDL(),m.initTxS(),m.initTxB(),m.initTxV(),m.initTxA()}},v={name:"home.vue",data:function(){return{}},methods:{getBalance:function(){this.$router.push("/blc")},nickName:function(){this.$router.push("/ncn")},message:function(){this.$router.push("/msg")},logoutMsg:function(){var t=this;this.$confirm("确定退出登录吗？","提示：",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.logout()})).catch((function(){t.$message({type:"info",message:"取消退出登录"})}))},logout:function(){u.a.send({Name:"logout",Payload:""},(function(t,e){u.a.cleanFuncMap(),setTimeout((function(){e.$router.push("/")}),500)}),(function(t,e){console.log("退出登录失败：",t),e.$alert(t,"退出登录失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},created:function(){d.init();var t=this;t.$store.state.account=this.$route.params.acc,u.a.send({Name:"currentUserDataUpdate",Payload:{}},(function(e,a){console.log("用户信息更新成功！",e),d.reacquireData("all"),t.$store.state.nickname=e}),(function(t,e){console.log("用户信息更新失败：",t),e.$alert(t,"用户信息更新失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"}).then((function(){e.$router.push("/")}))}))}},b=(a("3VAn"),Object(l.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{staticClass:"top",attrs:{span:24}},[a("el-col",{attrs:{span:18}},[t._v("Dapp")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-dropdown",{staticClass:"top-dropdown",attrs:{"show-timeout":"200",trigger:"click"}},[a("span",[t._v(t._s(this.$store.state.nickname))]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.getBalance(e)}}},[t._v("余额查询")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.nickName(e)}}},[t._v("修改昵称")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.message(e)}}},[t._v("消息处理")]),t._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){return t.logoutMsg(e)}}},[t._v("退出登录")])],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:4}},[a("aside",{staticClass:"aside"},[a("el-menu",{attrs:{"default-active":t.$route.path,"unique-opened":"",router:""}},[t._l(t.$router.options.routes,(function(e){return t._l(e.children,(function(e){return e.hidden?t._e():a("el-menu-item",{key:e.path,attrs:{index:e.path}},[t._v(t._s(e.name))])}))}))],2)],1)]),t._v(" "),a("el-col",{attrs:{span:20}},[a("section",{staticClass:"section"},[a("router-view")],1)])],1)],1)],1)}),[],!1,null,"1d9dfdaf",null).exports),g=(a("a1Th"),a("Btvt"),{name:"CFT",data:function(){return{dialog:!1,dialogInner:!1,password:""}},props:{buttonSize:{type:String,default:"mini"},buttonType:{type:String,default:"primary"},buttonName:{type:String,default:"default button name"},dialogTitle:{type:String,default:"default dialog title"},buttonDisabled:{type:Boolean,default:!1},preParams:Array},methods:{pre:function(t){if(this.dialog=!0,t){for(var e=[],a=0;a<t.length;a++)e.push(t[a]);this.$emit("pre",e)}},cancelFunc:function(t){"输入密码"===t?this.dialogInner=!1:this.dialog=!1,this.$message({type:"info",message:"取消"+t})},submitFunc:function(){this.dialogInner=!1,this.dialog=!1;var t=this.password;this.password="",this.$emit("password",t)}}}),_=(a("KjXA"),Object(l.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inALine"},[a("el-button",{attrs:{size:t.buttonSize,type:t.buttonType,disabled:t.buttonDisabled},on:{click:function(e){return t.pre(t.preParams)}}},[t._v(t._s(t.buttonName))]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialog,title:t.dialogTitle},on:{"update:visible":function(e){t.dialog=e}}},[a("el-dialog",{attrs:{visible:t.dialogInner,title:"输入密码：","append-to-body":""},on:{"update:visible":function(e){t.dialogInner=e}}},[a("p",[t._v(t._s(this.$store.state.account))]),t._v(" "),a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelFunc("输入密码")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitFunc()}}},[t._v("确认")])],1)],1),t._v(" "),t._t("default"),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelFunc(t.buttonName)}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogInner=!0}}},[t._v("输入密码")])],1)],2)],1)}),[],!1,null,"76464ae0",null).exports),y={name:"datalist.vue",data:function(){return{selectedData:{},curPage:1,pageSize:6,total:0,height:window.innerHeight-170,startVerify:!1}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedData={PublishId:t.PublishId,SupportVerify:t.SupportVerify,Price:t.Price}},initDL:function(){d.reacquireData("dl")},advancePurchase:function(t){u.a.send({Name:"advancePurchase",Payload:{password:t,startVerify:this.startVerify,PublishId:this.selectedData.PublishId,price:this.selectedData.Price.toString()}},(function(t,e){console.log("预购买成功",t)}),(function(t,e){console.log("预购买失败：",t),e.$alert(t,"预购买失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{CFT:_},computed:{listenDLRefresh:function(){return this.$store.state.datalist}},watch:{listenDLRefresh:function(){this.curPage=1,this.total=this.$store.state.datalist.length}},created:function(){this.total=this.$store.state.datalist.length,this.initDL()}},w=Object(l.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"section-item10",attrs:{span:21}},[a("c-f-t",{attrs:{"button-name":"预购买","dialog-title":"是否启动验证流程？"},on:{password:t.advancePurchase}},[t.selectedData.SupportVerify?a("div",[a("p",[t._v("是否启动验证流程：")]),t._v(" "),a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.startVerify,callback:function(e){t.startVerify=e},expression:"startVerify"}})],1):t._e(),t._v(" "),t.selectedData.SupportVerify?t._e():a("div",[a("p",[t._v("卖家不支持验证。")]),t._v("点击“输入密码”按钮直接购买数据")])])],1),t._v(" "),a("el-col",{staticClass:"section-item10",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initDL}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.datalist.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{prop:"PublishId",label:"发布ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"价格","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Keys",label:"标签","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"描述","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"SVDisplay",label:"是否支持验证","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1)}),[],!1,null,null,null).exports,T=a("oKCb"),P={name:"transaction_2_buyer.vue",data:function(){return{selectedTx:{},curPage:1,pageSize:6,total:0,height:window.innerHeight-170,txState:"Begin",supportVerify:!1,confirmDataResult:!0,verifier1Revert:!1,verifier1Grade:5,verifier2Revert:!1,verifier2Grade:5}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedTx={TransactionId:t.TransactionId,SupportVerify:t.SupportVerify,Verifier1Response:t.Verifier1Response,Verifier2Response:t.Verifier2Response},this.txState=t.State},buttonDisabled:function(t){return d.functionDisabled(t,this.txState)},initTxB:function(){d.reacquireData("txb")},cancelPurchase:function(t){u.a.send({Name:"cancelPurchase",Payload:{password:t,TransactionId:this.selectedTx.TransactionId}},(function(t,e){console.log("取消交易成功",t)}),(function(t,e){console.log("取消交易失败：",t),e.$alert(t,"取消交易失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},confirmPurchase:function(t){u.a.send({Name:"confirmPurchase",Payload:{password:t,TransactionId:this.selectedTx.TransactionId}},(function(t,e){console.log("购买数据成功",t)}),(function(t,e){console.log("购买数据失败：",t),e.$alert(t,"购买数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},decrypt:function(t){u.a.send({Name:"decrypt",Payload:{password:t,TransactionId:this.selectedTx.TransactionId}},(function(t,e){console.log("解密数据成功",t),e.$alert(t,"原始数据：",{customClass:"longText",confirmButtonText:"关闭",showClose:!1,type:"info"})}),(function(t,e){console.log("解密数据失败：",t),e.$alert(t,"解密数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},confirmDataPre:function(t){this.supportVerify=t[0]},confirmData:function(t){u.a.send({Name:"confirmData",Payload:{password:t,TransactionId:this.selectedTx.TransactionId,confirm:{confirmResult:this.confirmDataResult}}},(function(t,e){e.supportVerify=!1,console.log("确认数据成功",t)}),(function(t,e){console.log("确认数据失败：",t),e.$alert(t,"确认数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},gradePre:function(t){this.verifier1Revert=t[0],this.verifier2Revert=t[1]},gradeToVerifier:function(t){u.a.send({Name:"gradeToVerifier",Payload:{password:t,TransactionId:this.selectedTx.TransactionId,grade:{verifier1Revert:this.verifier1Revert,verifier1Grade:this.verifier1Grade,verifier2Revert:this.verifier2Revert,verifier2Grade:this.verifier2Grade}}},(function(t,e){e.verifier1Revert=!1,e.verifier2Revert=!1,console.log("评价验证者成功",t)}),(function(t,e){console.log("评价验证者失败：",t),e.$alert(t,"评价验证者失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:T.a,CFT:_},computed:{listenTxBRefresh:function(){return this.$store.state.transactionbuy}},watch:{listenTxBRefresh:function(){this.curPage=1,this.total=this.$store.state.transactionbuy.length}},created:function(){this.total=this.$store.state.transactionbuy.length}},S=(a("/Iye"),Object(l.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"section-item",attrs:{span:21}},[a("s-f-t",{attrs:{"button-name":"取消交易","button-type":"danger","button-disabled":t.buttonDisabled(1)},on:{password:t.cancelPurchase}}),t._v(" "),a("s-f-t",{attrs:{"button-name":"购买数据","button-disabled":t.buttonDisabled(2)},on:{password:t.confirmPurchase}}),t._v(" "),a("s-f-t",{attrs:{"button-name":"解密数据","button-disabled":t.buttonDisabled(3)},on:{password:t.decrypt}}),t._v(" "),a("c-f-t",{attrs:{"button-name":"确认数据","dialog-title":"判断原始数据真实性：","pre-params":[this.selectedTx.SupportVerify],"button-disabled":t.buttonDisabled(3)},on:{password:t.confirmData,pre:t.confirmDataPre}},[t.supportVerify?a("p",[t._v("判断原始数据真实性，如果你认为原始数据是假的，我们将为你启动仲裁流程：")]):t._e(),t._v(" "),t.supportVerify?t._e():a("p",[t._v("判断原始数据真实性，点击“输入密码”按钮完成交易。")]),t._v(" "),a("p",[a("el-switch",{attrs:{"active-text":"真","inactive-text":"假"},model:{value:t.confirmDataResult,callback:function(e){t.confirmDataResult=e},expression:"confirmDataResult"}})],1)]),t._v(" "),a("c-f-t",{attrs:{"button-name":"评价验证者","dialog-title":"评价验证者：","button-disabled":t.buttonDisabled(4),"pre-params":[""!==this.selectedTx.Verifier1Response,""!==this.selectedTx.Verifier2Response]},on:{password:t.gradeToVerifier,pre:t.gradePre}},[a("p",[t._v("验证者1:")]),t._v(" "),a("p",[t.verifier1Revert?a("el-slider",{attrs:{max:"5","show-input":""},model:{value:t.verifier1Grade,callback:function(e){t.verifier1Grade=e},expression:"verifier1Grade"}}):t._e(),t._v(" "),t.verifier1Revert?t._e():a("span",[t._v("交易未进入验证流程或验证者未回复")])],1),t._v(" "),a("p",[t._v("验证者2:")]),t._v(" "),a("p",[t.verifier2Revert?a("el-slider",{attrs:{max:"5","show-input":""},model:{value:t.verifier2Grade,callback:function(e){t.verifier2Grade=e},expression:"verifier2Grade"}}):t._e(),t._v(" "),t.verifier2Revert?t._e():a("span",[t._v("交易未进入验证流程或验证者未回复")])],1)])],1),t._v(" "),a("el-col",{staticClass:"section-item section-item-right",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initTxB}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.transactionbuy.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return a("el-form",{staticClass:"tx-table-expand",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"数据ID"}},[a("span",[t._v(t._s(e.row.PublishId))])]),t._v(" "),a("el-form-item",{attrs:{label:"交易ID"}},[a("span",[t._v(t._s(e.row.TransactionId))])]),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("span",[t._v(t._s(e.row.Title))])]),t._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("span",[t._v(t._s(e.row.Price))])]),t._v(" "),a("el-form-item",{attrs:{label:"标签"}},[a("span",[t._v(t._s(e.row.Keys))])]),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("span",[t._v(t._s(e.row.Description))])]),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("span",[t._v(t._s(e.row.State))])]),t._v(" "),a("el-form-item",{attrs:{label:"是否支持验证"}},[a("span",[t._v(t._s(e.row.SVDisplay))])]),t._v(" "),a("el-form-item",{attrs:{label:"是否启用验证"}},[a("span",[t._v(t._s(e.row.NVDisplay))])]),t._v(" "),a("el-form-item",{attrs:{label:"验证者1回复"}},[a("span",[t._v(t._s(e.row.Verifier1Response))])]),t._v(" "),a("el-form-item",{attrs:{label:"验证者2回复"}},[a("span",[t._v(t._s(e.row.Verifier2Response))])]),t._v(" "),a("el-form-item",{attrs:{label:"仲裁结果"}},[a("span",[t._v(t._s(e.row.ArbitrateResult))])])],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"价格","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"State",label:"状态","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1)}),[],!1,null,null,null).exports),C={name:"transaction_1_seller.vue",data:function(){return{selectedTx:"",curPage:1,pageSize:6,total:0,height:window.innerHeight-170,txState:"Begin"}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedTx=t.TransactionId,this.txState=t.State},buttonDisabled:function(t){return d.functionDisabled(t,this.txState)},initTxS:function(){d.reacquireData("txs")},reEncrypt:function(t){u.a.send({Name:"reEncrypt",Payload:{password:t,TransactionId:this.selectedTx}},(function(t,e){console.log("再加密数据成功",t)}),(function(t,e){console.log("再加密数据失败：",t),e.$alert(t,"再加密数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:T.a},computed:{listenTxSRefresh:function(){return this.$store.state.transactionsell}},watch:{listenTxSRefresh:function(){this.curPage=1,this.total=this.$store.state.transactionsell.length}},created:function(){this.total=this.$store.state.transactionsell.length}},x=Object(l.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"section-item",attrs:{span:21}},[a("s-f-t",{attrs:{"button-name":"再加密数据","button-disabled":t.buttonDisabled(0)},on:{password:t.reEncrypt}})],1),t._v(" "),a("el-col",{staticClass:"section-item",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initTxS}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.transactionsell.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return a("el-form",{staticClass:"tx-table-expand",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"数据ID"}},[a("span",[t._v(t._s(e.row.PublishId))])]),t._v(" "),a("el-form-item",{attrs:{label:"交易ID"}},[a("span",[t._v(t._s(e.row.TransactionId))])]),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("span",[t._v(t._s(e.row.Title))])]),t._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("span",[t._v(t._s(e.row.Price))])]),t._v(" "),a("el-form-item",{attrs:{label:"标签"}},[a("span",[t._v(t._s(e.row.Keys))])]),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("span",[t._v(t._s(e.row.Description))])]),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("span",[t._v(t._s(e.row.State))])]),t._v(" "),a("el-form-item",{attrs:{label:"是否支持验证"}},[a("span",[t._v(t._s(e.row.SVDisplay))])]),t._v(" "),a("el-form-item",{attrs:{label:"是否启用验证"}},[a("span",[t._v(t._s(e.row.NVDisplay))])]),t._v(" "),a("el-form-item",{attrs:{label:"仲裁结果"}},[a("span",[t._v(t._s(e.row.ArbitrateResult))])])],1)}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"State",label:"状态","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1)}),[],!1,null,null,null).exports,I=a("ueYn").a,D=(a("+njc"),Object(l.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-form",{staticClass:"pubForm",attrs:{model:t.pubData,"label-position":"left","label-width":"25%","style-height":t.height}},[a("el-form-item",{attrs:{label:"标题:"}},[a("el-input",{attrs:{clearable:""},model:{value:t.pubData.details.Title,callback:function(e){t.$set(t.pubData.details,"Title",e)},expression:"pubData.details.Title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"价格:"}},[a("el-input",{attrs:{type:"number",clearable:"",placeholder:"uint is DDD"},model:{value:t.pubData.Price,callback:function(e){t.$set(t.pubData,"Price",t._n(e))},expression:"pubData.Price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签:"}},[a("el-input",{attrs:{clearable:""},model:{value:t.pubData.details.Keys,callback:function(e){t.$set(t.pubData.details,"Keys",e)},expression:"pubData.details.Keys"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述:"}},[a("el-input",{attrs:{type:"textarea",rows:2,clearable:""},model:{value:t.pubData.details.Description,callback:function(e){t.$set(t.pubData.details,"Description",e)},expression:"pubData.details.Description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否支持验证："}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.SupportVerify,callback:function(e){t.SupportVerify=e},expression:"SupportVerify"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据:"}},[a("input",{ref:"selectedData",staticClass:"el-input__inner",attrs:{type:"file"}})]),t._v(" "),a("el-form-item",{attrs:{label:"证明:"}},[a("input",{ref:"selectedProofs",staticClass:"el-input__inner",attrs:{type:"file",multiple:""}})]),t._v(" "),a("el-form-item",[a("s-f-t",{attrs:{"button-name":"Publish","button-size":"medium"},on:{password:t.pubPrepare}})],1)],1)],1)}),[],!1,null,null,null).exports),$={name:"transaction_3_verifier.vue",data:function(){return{selectedTx:"",curPage:1,pageSize:6,total:0,height:window.innerHeight-170,showControl:!1,txState:"Begin",verify:{suggestion:!1,comment:""}}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedTx=t.TransactionId,this.txState=t.State},initTxV:function(){utils.reacquireData("txv")},register:function(t){u.a.send({Name:"register",Payload:{password:t}},(function(t,e){console.log("注册成为验证者成功",t)}),(function(t,e){console.log("注册成为验证者失败：",t),e.$alert(t,"注册成为验证者失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},vote:function(t){u.a.send({Name:"vote",Payload:{password:t,TransactionId:this.selectedTx,verify:this.verify}},(function(t,e){e.verify={suggestion:!1,comment:""},console.log("验证成功",t)}),(function(t,e){console.log("验证失败：",t),e.$alert(t,"验证失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:T.a,CFT:_},computed:{listenTxVRefresh:function(){return this.$store.state.transactionverifier}},watch:{listenTxVRefresh:function(){this.curPage=1,this.total=this.$store.state.transactionverifier.length}},created:function(){this.total=this.$store.state.transactionverifier.length;var t=this;u.a.send({Name:"isVerifier",Payload:{}},(function(e,a){t.showControl=e,console.log("当前用户验证者身份查询成功：",e)}),(function(t,e){console.log("当前用户验证者身份查询失败!",t),e.$alert(t,"当前用户不是验证者！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},k=Object(l.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.showControl?t._e():a("div",[a("el-col",{staticClass:"section-item",attrs:{span:24}},[a("s-f-t",{attrs:{"button-name":"注册成为验证者"},on:{password:t.register}})],1)],1),t._v(" "),t.showControl?a("div",[a("el-col",{staticClass:"section-item",attrs:{span:21}},[a("c-f-t",{attrs:{"button-name":"验证数据","dialog-title":"验证数据："},on:{password:t.vote}},[a("p",[t._v("是否建议购买：")]),t._v(" "),a("p",[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.verify.suggestion,callback:function(e){t.$set(t.verify,"suggestion",e)},expression:"verify.suggestion"}})],1),t._v(" "),a("p",[a("el-input",{attrs:{placeholder:"评论",clearable:""},model:{value:t.verify.comment,callback:function(e){t.$set(t.verify,"comment",e)},expression:"verify.comment"}})],1)])],1),t._v(" "),a("el-col",{staticClass:"section-item",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initTxV}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.transactionverifier.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{prop:"PublishId",label:"数据ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"TransactionId",label:"交易ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"价格","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Keys",label:"标签","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"描述","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1):t._e()])}),[],!1,null,"3779665c",null).exports,V={name:"transaction_4_arbitrator.vue",data:function(){return{selectedTx:"",arbitrateResult:!1,height:window.innerHeight-170,showControl:!1,txState:"Begin",curPage:1,pageSize:6,total:0}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedTx=t.TransactionId,this.txState=t.State},initTxA:function(){utils.reacquireData("txa")},decrypt:function(t){u.a.send({Name:"decrypt",Payload:{password:t,TransactionId:this.selectedTx}},(function(t,e){console.log("解密数据成功",t),e.$alert(t,"原始数据：",{customClass:"longText",confirmButtonText:"关闭",showClose:!1,type:"info"})}),(function(t,e){console.log("解密数据失败：",t),e.$alert(t,"解密数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},arbitrate:function(t){u.a.send({Name:"arbitrate",Payload:{password:t,TransactionId:this.selectedTx,arbitrate:{arbitrateResult:this.arbitrateResult}}},(function(t,e){console.log("仲裁成功",t),e.$store.state.transactionarbitrator.forEach((function(e,a,n){e.TransactionId===t&&(n[a]=n[0],n.shift())}))}),(function(t,e){console.log("仲裁失败：",t),e.$alert(t,"仲裁失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:T.a,CFT:_},computed:{listenTxARefresh:function(){return this.$store.state.transactionarbitrator}},watch:{listenTxARefresh:function(){this.curPage=1,this.total=this.$store.state.transactionarbitrator.length}},created:function(){this.total=this.$store.state.transactionarbitrator.length;var t=this;u.a.send({Name:"isVerifier",Payload:{}},(function(e,a){t.showControl=e,console.log("当前用户验证者身份查询成功：",e)}),(function(t,e){console.log("当前用户验证者身份查询失败!",t),e.$alert(t,"当前用户不是验证者！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},z=(a("z9pR"),Object(l.a)(V,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.showControl?t._e():a("div",[a("el-col",{staticClass:"section-item",attrs:{span:24}},[t._v("\n            你还不是验证者！请前往验证界面注册成为验证者。\n        ")])],1),t._v(" "),t.showControl?a("div",[a("el-col",{staticClass:"section-item",attrs:{span:21}},[a("s-f-t",{attrs:{"button-name":"解密数据"},on:{password:t.decrypt}}),t._v(" "),a("c-f-t",{attrs:{"button-name":"仲裁数据","dialog-title":"仲裁数据："},on:{password:t.arbitrate}},[a("p",[t._v("判断数据真实性：")]),t._v(" "),a("p",[a("el-switch",{attrs:{"active-text":"真","inactive-text":"假"},model:{value:t.arbitrateResult,callback:function(e){t.arbitrateResult=e},expression:"arbitrateResult"}})],1)])],1),t._v(" "),a("el-col",{staticClass:"section-item section-item-right",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initTxA}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.transactionarbitrator.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{prop:"PublishId",label:"数据ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"TransactionId",label:"交易ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"价格","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Keys",label:"标签","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"描述","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1):t._e()])}),[],!1,null,null,null).exports),R=(a("KKXr"),{name:"balance.vue",data:function(){return{}},methods:{getEthBalance:function(t){var e=this;u.a.send({Name:"getEthBalance",Payload:{password:t}},(function(t,a){console.log("查询以太币余额成功：",t.split("|")[0]),e.$store.state.balance[0].Balance=t.split("|")[0],e.$store.state.balance[0].Time=t.split("|")[1]}),(function(t,e){console.log("查询以太币余额失败：",t),e.$alert(t,"查询以太币余额失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},getTokenBalance:function(t){var e=this;u.a.send({Name:"getTokenBalance",Payload:{password:t}},(function(t,a){console.log("查询token余额成功：",t.split("|")[0]),e.$store.state.balance[1].Balance=t.split("|")[0],e.$store.state.balance[1].Time=t.split("|")[1]}),(function(t,e){console.log("查询token余额失败：",t),e.$alert(t,"查询token余额失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:T.a}}),B=(a("wjHK"),Object(l.a)(R,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"section-item center token-item"},[a("el-col",{attrs:{span:2}},[t._v("以太币")]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v("余额：")]),t._v(" "),a("el-col",{staticClass:"token-middle-font",attrs:{span:5}},[t._v(t._s(this.$store.state.balance[0].Balance))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v("wei")]),t._v(" "),a("el-col",{staticClass:"token-small-font",attrs:{span:2}},[t._v("查询时间：")]),t._v(" "),a("el-col",{staticClass:"token-small-font",attrs:{span:8}},[t._v(t._s(this.$store.state.balance[0].Time))]),t._v(" "),a("el-col",{staticClass:"section-item-right",attrs:{span:3}},[a("s-f-t",{attrs:{"button-name":"余额查询","button-size":"small"},on:{password:t.getEthBalance}})],1)],1),t._v(" "),a("el-row",{staticClass:"section-item center token-item"},[a("el-col",{attrs:{span:2}},[t._v("token")]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v("余额：")]),t._v(" "),a("el-col",{staticClass:"token-middle-font",attrs:{span:5}},[t._v(t._s(this.$store.state.balance[1].Balance))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v("DDD")]),t._v(" "),a("el-col",{staticClass:"token-small-font",attrs:{span:2}},[t._v("查询时间：")]),t._v(" "),a("el-col",{staticClass:"token-small-font",attrs:{span:8}},[t._v(t._s(this.$store.state.balance[1].Time))]),t._v(" "),a("el-col",{staticClass:"section-item-right",attrs:{span:3}},[a("s-f-t",{attrs:{"button-name":"余额查询","button-size":"small"},on:{password:t.getTokenBalance}})],1)],1)],1)}),[],!1,null,"868ac1fe",null).exports),N={name:"nickname.vue",data:function(){return{nickname:""}},methods:{modifyNickname:function(){this.validNickname()?this.$alert("请勿使用标准地址类型（以'0x'开头的40位十六进制数）作为昵称。","非法昵称！",{confirmButtonText:"关闭",showClose:!1,type:"error"}):u.a.send({Name:"modifyNickname",Payload:{Nickname:this.nickname}},(function(t,e){console.log("修改昵称成功：",t),e.$store.state.nickname=e.nickname}),(function(t,e){console.log("修改昵称失败！",t),e.$alert(t,"修改昵称失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},validNickname:function(){return/^0x(\d|[a-f]){40}$/i.test(this.nickname)}}},E=(a("j3eN"),Object(l.a)(N,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",[a("el-col",{staticClass:"section-item center nickname_address",attrs:{span:24}},[t._v("\n            用户地址："+t._s(this.$store.state.account)+"\n        ")])],1),t._v(" "),a("el-row",{staticClass:"section-item center nickname_nickname"},[a("el-col",{attrs:{span:12}},[t._v("\n            用户昵称："+t._s(this.$store.state.nickname)+"\n        ")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{attrs:{placeholder:"nickname, suggest different structure from address"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"section-item-right",attrs:{size:"mini",type:"primary"},on:{click:t.modifyNickname}},[t._v("修改昵称")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"section-item center",attrs:{span:24}},[a("el-button",{staticClass:"section-item-right",attrs:{size:"mini",type:"primary"},on:{click:t.DBBackup}},[t._v("用户信息备份")]),t._v(" "),a("el-button",{staticClass:"section-item-right",attrs:{size:"mini",type:"primary"},on:{click:t.DBRestore}},[t._v("用户信息还原")])],1)],1)],1)}),[],!1,null,"3061f422",null).exports),A={name:"CFT1",data:function(){return{dialog:!1,dialogInner:!1,delID:""}},props:{buttonSize:{type:String,default:"mini"},buttonType:{type:String,default:"primary"},buttonName:{type:String,default:"default button name"},dialogTitle:{type:String,default:"default dialog title"},buttonDisabled:{type:Boolean,default:!1},preParams:Array},methods:{pre:function(t){if(this.dialog=!0,t){for(var e=[],a=0;a<t.length;a++)e.push(t[a]);this.$emit("pre",e)}},cancelFunc:function(t){this.dialog=!1,this.$message({type:"info",message:"取消"+t})},submitFunc:function(){this.dialogInner=!1,this.dialog=!1;var t=this.password;this.password="",this.$emit("password",t)}}},F=(a("Scgh"),{name:"message.vue",data:function(){return{selectedData:{},curPage:1,pageSize:6,total:0,height:window.innerHeight-170,startVerify:!1,input:""}},methods:{setCurPage:function(t){this.curPage=t},setPageSize:function(t){this.pageSize=t},currentChange:function(t){this.selectedData={PublishID:t.PublishID,SupportVerify:t.SupportVerify,Price:t.Price}},initEvtDL:function(){d.reacquireData("evtdl")}},computed:{listenDLRefresh:function(){return this.$store.state.datalist}},watch:{listenDLRefresh:function(){this.curPage=1,this.total=this.$store.state.datalist.length}},components:{CFT1:Object(l.a)(A,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inALine"},[a("el-button",{attrs:{size:t.buttonSize,type:t.buttonType,disabled:t.buttonDisabled},on:{click:function(e){return t.pre(t.preParams)}}},[t._v(t._s(t.buttonName))]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialog,title:t.dialogTitle},on:{"update:visible":function(e){t.dialog=e}}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelFunc(t.buttonName)}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogInner=!0}}},[t._v("确定删除")])],1)])],1)}),[],!1,null,"9f1b1098",null).exports},created:function(){this.total=this.$store.state.datalist.length,this.initEvtDL()}}),O=(a("zkzE"),Object(l.a)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"section-item-10",attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initEvtDL}},[t._v("标记为已读")])],1),t._v(" "),a("el-col",{staticClass:"section-item-10",attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initEvtDL}},[t._v("未读")])],1),t._v(" "),a("el-col",{staticClass:"section-item-10",attrs:{span:3}},[a("c-f-t1",{attrs:{"button-name":"删除","dialog-title":"是否确认删除？"},on:{password:t.initEvtDL}},[a("div",[a("p",[t._v("是否确认删除：")]),t._v(" "),a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"}})],1)])],1),t._v(" "),a("el-col",{staticClass:"section-item-10",attrs:{span:11}},[a("el-input",{staticClass:"txtHeight",attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),a("el-col",{staticClass:"section-item-10",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initEvtDL}},[t._v("搜索")])],1),t._v(" "),a("el-col",{staticClass:"section-item-10",attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.initEvtDL}},[t._v("刷新列表")])],1),t._v(" "),a("el-table",{attrs:{data:this.$store.state.datalist.slice((t.curPage-1)*t.pageSize,t.curPage*t.pageSize),"highlight-current-row":"",border:"",height:t.height},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{prop:"Id",label:"ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EventName",label:"类型","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EventStatus",label:"状态","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreatedTime",label:"时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"EventBody",label:"内容","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{total:t.total,layout:"sizes, total, prev, pager, next, jumper","page-sizes":[5,6],"page-size":t.pageSize},on:{"current-change":t.setCurPage,"size-change":t.setPageSize}})],1)}),[],!1,null,null,null).exports),j={name:"ES_administrator.vue",data:function(){return{modifyItem:"",newParamValue:"",modifyList:[{paramName:"VerifierNum"}]}},methods:{welcome:function(){this.$notify({title:"彩蛋: ",dangerouslyUseHTMLString:!0,message:"谢谢你使用我的程序!&nbsp;<strong>:)</strong>",position:"top-left"})},logoutSimulate:function(){b.methods.logout()},modifyParam:function(){u.a.send({Name:"modifyContractParam",Payload:{modifyContractParam:{paramName:this.modifyItem,paramValue:this.newParamValue}}},(function(t,e){console.log("modify param success: ",t)}),(function(t,e){console.log("modify param failed! ",t)}))}}},K=(a("40Fw"),Object(l.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"administrator"},[a("el-col",{staticClass:"section-item",attrs:{span:24}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.welcome}},[t._v("Welcome")])],1),t._v(" "),a("el-col",{staticClass:"section-item",attrs:{span:24}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.logoutSimulate}},[t._v("Logout Simulate")])],1),t._v(" "),a("div",[a("el-col",{staticClass:"section-item",attrs:{span:5}},[a("el-select",{attrs:{size:"mini",placeholder:"Choose param",clearable:"","allow-create":"",filterable:""},model:{value:t.modifyItem,callback:function(e){t.modifyItem=e},expression:"modifyItem"}},t._l(t.modifyList,(function(t){return a("el-option",{key:t.paramName,attrs:{value:t.paramName,label:t.paramName}})})),1)],1),t._v(" "),a("el-col",{staticClass:"section-item",attrs:{span:9}},[a("el-input",{attrs:{size:"mini",placeholder:"new param value",clearable:""},model:{value:t.newParamValue,callback:function(e){t.newParamValue=e},expression:"newParamValue"}})],1),t._v(" "),a("el-col",{staticClass:"section-item",attrs:{span:10}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.modifyParam}},[t._v("ModifyParam")])],1)],1)],1)}),[],!1,null,null,null).exports),L=[{path:"/",component:f,name:"login",hidden:!0},{path:"/home",component:b,name:"home",children:[{path:"/dl",component:w,name:"数据列表"},{path:"/ts",component:x,name:"我出售的数据"},{path:"/tb",component:S,name:"我购买的数据"},{path:"/pd",component:D,name:"发布新数据"},{path:"/vf",component:k,name:"我验证的数据"},{path:"/at",component:z,name:"我仲裁的数据"},{path:"/blc",component:B,name:"Balance",hidden:!0},{path:"/ncn",component:E,name:"NickName",hidden:!0},{path:"/msg",component:O,name:"Short Message",hidden:!0},{path:"/administrator",component:K,name:"Administrator Functions",hidden:!0}]},{path:"/404",component:c,name:"not found",hidden:!0},{path:"*",redirect:{path:"/404"},hidden:!0}],H=a("XJYT"),M=a.n(H),G=(a("D66Q"),a("91GP"),{name:"app",created:function(){u.a.WSConnect(this),sessionStorage.getItem("store")&&(this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),sessionStorage.removeItem("store")),window.addEventListener("beforeunload",(function(){sessionStorage.setItem("store",JSON.stringify(this.$store.state))}))}}),J=(a("A0++"),Object(l.a)(G,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)}),[],!1,null,null,null).exports);n.default.use(o.a),n.default.use(i.a),n.default.use(M.a);var X=new i.a({routes:L});new n.default({router:X,store:s,render:function(t){return t(J)}}).$mount("#app")},WhPK:function(t,e,a){},XHZR:function(t,e,a){},dpme:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("VRzm"),a("Btvt");var n=a("o0o1"),o=a.n(n),s=(a("ls82"),a("KKXr"),{ws:WebSocket,count:0,MAX:1e3,t:setTimeout((function(){s.reconnect()}),200),ipfs:a("lOTI")({host:"localhost",port:"5001",protocol:"http"}),map:{},msgMutex:!0,msgParams:[],WSConnect:function(t){var e=window.location.href.split(":")[2].split("/")[0];s.ws=new WebSocket("ws://127.0.0.1:"+e+"/ws","ws"),s.ws.onopen=function(t){console.log("connection onopen. ",t),s.send({Name:"getAccountsList",Payload:""},(function(t,e){e.$store.state.accounts=[];for(var a=0;a<t.length;a++)e.$store.state.accounts.push({address:t[a].Address})}),(function(t,e){console.log("获取历史用户列表失败：",t),e.$alert(t,"获取历史用户列表失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},s.ws.onmessage=function(e){console.log("received   : ",e.data);var a=JSON.parse(e.data);s.msgHandle(a,t)},s.ws.onclose=function(e){console.log("connection onclose. ",e),s.ws.close(),t.$confirm("websocket连接已断开，请点击按钮重新连接。","连接断开！",{confirmButtonText:"重新连接",cancelButtonText:"取消",type:"error"}).then((function(){s.reconnect()})).catch((function(){t.$message({type:"error",message:"websocket连接已断开。",duration:0,showClose:!0})})),t.$router.push("/")},s.ws.onerror=function(t){console.log("connection onerror. ",t),s.ws.close()}},msgHandle:function(t,e){return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!s.msgMutex){a.next=10;break}return s.msgMutex=!1,a.next=4,o.a.awrap(s.map[t.Name](t.Payload,e));case 4:return a.next=6,o.a.awrap(i(250));case 6:s.msgMutex=!0,s.msgParams.length>0&&s.msgHandle(s.msgParams.shift(),e),a.next=11;break;case 10:s.msgParams.push(t);case 11:case"end":return a.stop()}}))},reconnect:function(){s.count++,console.log("reconnection...【"+s.count+"】"),s.count>=s.MAX||1===s.ws.readyState?clearTimeout(s.t):(3===s.ws.readyState&&s.WSConnect(),s.t=setTimeout((function(){s.reconnect()}),200))},send:function(t,e,a){s.ws&&(e&&s.addCallbackFunc(t.Name+".callback",e),a&&s.addCallbackFunc(t.Name+".callback.error",a),console.log("before send: ",JSON.stringify(t)),s.ws.send(JSON.stringify(t)))},addCallbackFunc:function(t,e){s.map[t]=e},cleanFuncMap:function(){s.map={}}});function i(t){return new Promise((function(e){return setTimeout(e,t)}))}},j3eN:function(t,e,a){"use strict";var n=a("LvXw");a.n(n).a},nf9V:function(t,e,a){"use strict";var n=a("QICH");a.n(n).a},ngoe:function(t,e,a){},oKCb:function(t,e,a){"use strict";var n={name:"SFT",data:function(){return{dialog:!1,password:""}},props:{buttonSize:{type:String,default:"mini"},buttonType:{type:String,default:"primary"},buttonName:{type:String,default:"default button name"},buttonDisabled:{type:Boolean,default:!1},preParams:Array},methods:{pre:function(t){if(this.dialog=!0,t){for(var e=[],a=0;a<t.length;a++)e.push(t[a]);this.$emit("pre",e)}},cancelFunc:function(t){this.dialog=!1,this.$message({type:"info",message:"取消"+t})},submitFunc:function(){this.dialog=!1;var t=this.password;this.password="",this.$emit("password",t)}}},o=(a("nf9V"),a("KHd+")),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inALine"},[a("el-button",{attrs:{size:t.buttonSize,type:t.buttonType,disabled:t.buttonDisabled},on:{click:function(e){return t.pre(t.preParams)}}},[t._v(t._s(t.buttonName))]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialog,title:"输入密码："},on:{"update:visible":function(e){t.dialog=e}}},[a("p",[t._v(t._s(this.$store.state.account))]),t._v(" "),a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelFunc(t.buttonName)}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitFunc()}}},[t._v("确认")])],1)],1)],1)}),[],!1,null,"4f57edab",null);e.a=s.exports},uHud:function(t,e,a){},ueYn:function(t,e,a){"use strict";(function(t){a("a1Th"),a("Btvt"),a("f3/d"),a("xfY5");var n=a("dpme"),o=a("oKCb");e.a={name:"publish.vue",data:function(){return{height:window.innerHeight-20,pubData:{details:{Title:"",Keys:"",Description:"",Seller:"",MetaDataExtension:"",ProofDataExtensions:[]},Price:Number},SupportVerify:!1,Ids:{metaDataId:"",proofDataIds:[],detailsId:""},password:"",count:0}},methods:{pubPrepare:function(t){this.password=t,this.count=this.$refs.selectedProofs.files.length,this.pubData.details.Seller=this.$store.state.account,this.setDataId(),this.setProofIds()},setDataId:function(){this.Ids.metaDataId="";var e=this,a=this.$refs.selectedData.files[0];this.pubData.details.MetaDataExtension=a.name.slice(a.name.indexOf("."));var o=new FileReader;o.readAsArrayBuffer(a),o.onload=function(a){n.a.ipfs.add(t.from(a.target.result,"utf-8")).then((function(t){e.Ids.metaDataId=t[0].hash,e.count--})).catch((function(t){console.log("IPFS上传失败：",t),e.$alert(t,"IPFS上传失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},setProofIds:function(){this.Ids.proofDataIds=[],this.pubData.details.ProofDataExtensions=[];for(var e=this,a=this.$refs.selectedProofs.files,o=0;o<a.length;o++){this.pubData.details.ProofDataExtensions.push(a[o].name.slice(a[o].name.indexOf(".")));var s=new FileReader;s.readAsArrayBuffer(a[o]),s.onload=function(a){n.a.ipfs.add(t.from(a.target.result,"utf-8")).then((function(t){e.Ids.proofDataIds.push(t[0].hash),e.count--})).catch((function(t){console.log("IPFS上传失败：",t),e.$alert(t,"IPFS上传失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}}},setDetailsId:function(){var e=this;n.a.ipfs.add(t.from(JSON.stringify(this.pubData.details),"utf-8")).then((function(t){e.Ids.detailsId=t[0].hash,e.count--})).catch((function(t){console.log("IPFS上传失败：",t),e.$alert(t,"IPFS上传失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))},pub:function(){var t=this.password;this.password="",n.a.send({Name:"publish",Payload:{password:t,supportVerify:this.SupportVerify,price:this.pubData.Price.toString(),Ids:this.Ids}},(function(t,e){console.log("发布新数据成功",t)}),(function(t,e){console.log("发布新数据失败：",t),e.$alert(t,"发布新数据失败！",{confirmButtonText:"关闭",showClose:!1,type:"error"})}))}},components:{SFT:o.a},watch:{count:function(){-1===this.count&&this.setDetailsId(),-2===this.count&&(this.pub(),this.count=0)},height:function(){this.height=window.innerHeight-20}}}}).call(this,a("tjlA").Buffer)},vH4T:function(t,e,a){},vPc9:function(t,e,a){"use strict";var n=a("uHud");a.n(n).a},wjHK:function(t,e,a){"use strict";var n=a("WhPK");a.n(n).a},z9pR:function(t,e,a){"use strict";var n=a("CsaN");a.n(n).a},zCoa:function(t,e,a){},zkzE:function(t,e,a){"use strict";var n=a("DhUE");a.n(n).a}});